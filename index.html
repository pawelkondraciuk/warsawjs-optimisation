<!DOCTYPE html>
<html lang="en">
<head>
    

    <meta charset="utf-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Shower Theme -->
    <link rel="stylesheet" href="vendors/shower-ribbon/styles/screen-16x10.css"/>
    <link rel="stylesheet" href="vendors/shower-warsawjs/styles/main.css"/>
    <link rel="stylesheet" href="vendors/shower-video/shower-video.css"/>
    <link rel="stylesheet" href="vendors/chartist/chartist.min.css">

    <!-- Prism.js -->
    <link rel="stylesheet" href="vendors/prism/prism.css"/>
    <link rel="stylesheet" href="modules/custom-prism.css"/>
    <link rel="stylesheet" href="modules/styles.css"/>
</head>
<body class="shower list">
    <header class="caption">
        <h1>Workout plan to lose kilobytes</h1>
        <p>We talk about JavaScript. Each month in Warsaw, Poland.</p>
    </header>

    <section class="slide front-page">
        <div class="logo">
            <!-- Logo WarsawJS -->
            <img src="pictures/logo/warsawjs-logo-light.png">
        </div>
        <div class="details">
            <!-- 1. Avatar -->
            <img src="pictures/my-avatar.jpg" alt="Speaker"/>

            <!-- 2. Speaker -->
            <h2>Paweł Kondraciuk</h2>

            <!-- 3. Presentation title -->
            <h2><strong>Workout plan to lose kilobytes</strong></h2>

            <!-- 4. Presentation date -->
            <h2>2017-06-14</h2>

            <!-- 5. Contact the speaker -->
            <h2><a href="http://twitter.com/pawelkondraciuk">@pawelkondraciuk</a></h2>
        </div>
    </section>

    <section class="slide">
        <h2>Who Am I</h2>
        <ul>
            <li class="next">JavaScript Developer (no more CSS!)</li>
            <li class="next">Working at <img src="pictures/instapage.png" class="instapage"/></li>
            <li class="next">From Białystok</li>
        </ul>
        <img src="pictures/bialystok.jpg" class="next bialystok"/>
        <style>
            .instapage {
                height: 40px;
                margin-bottom: 50px;
                margin-left: 50px;
            }
            .bialystok {
                position: absolute;
                top: 0;
                bottom: 0;
            }
        </style>
    </section>

    <section class="slide">
        <h2>Who Am I</h2>
        <ul>
            <li>JavaScript Developer (ex Front-end)</li>
            <li>Working at <img src="pictures/instapage.png" class="instapage-fix"/></li>
            <li>From Białystok</li>
        </ul>
        <img src="pictures/bialystok.jpg"/>
        <style>
            .instapage-fix {
                height: 40px;
                vertical-align: middle;
            }
        </style>
    </section>


    <section class="slide compact">
		<video width="100%" preload>
            <source src="videos/app.webm" type="video/webm">
        </video>
	</section>

    <section class="slide">
        <h2>Specs</h2>
        <table>
            <tr>
                <th scope="col">Library</th>
                <th>Version</th>
                <th>Description</th>
            </tr>
            <tr>
                <th scope="row">@angular</th>
                <td>4.1.3</td>
                <td>core, compiler, router</td>
            </tr>
            <tr>
                <th scope="row">Rxjs</th>
                <td>5.0.3</td>
                <td>Observable, timer, map</td>
            </tr>
            <tr>
                <th scope="row">lodash</th>
                <td>4.17.4</td>
                <td>_.repeat</td>
            </tr>
            <tr>
                <th scope="row">Webpack</th>
                <td>2.6.1</td>
                <td>Bundler</td>
            </tr>
        </table>
    </section>

    <section class="slide compact">
		<video width="100%" preload>
            <source src="videos/no-opt.webm" type="video/webm">
        </video>
	</section>

	<section class="slide">
		<img src="pictures/fat-cat.gif" class="full-height" />
	</section>

    <section class="slide">
		<h2>Statistics</h2>
		<ul>
			<li class="next">47% of customers expect a cat to go through in less than 2 secs</li>
			<li class="next">40% of customers will leave if it lasts more than 3 seconds</li>
			<li class="next">70% of mobile users say that they saw cat that was too slow to move</li>
			<li class="next">51% of mobile users say that they saw cat that stucked</li>
		</ul>
		<p class="note next">source: Akamai 10For10, KissMetrics</p>
	</section>

    <section class="slide">
		<h2>Every Second Counts</h2>
		<ul>
			<li class="next">11% less views</li>
			<li class="next">16% decrease in customer satisfaction</li>
			<li class="next">7% reduction in conversions</li>
			<li class="next">Losing money $$</li>
		</ul>
		<p class="note next">source: Amazon, Walmart, KissMetrics</p>
	</section>

	<section class="slide">
		<h2>That's not all!</h2>
		<ul>
			<li class="next"><a href="https://productforums.google.com/forum/#!topic/webmasters/x-tAmtvK9iA/discussion" target="_blank">Negative ranking factor</a></li>
			<li class="next">Growing users frustration</li>
			<li class="next">Lower trust in the product</li>
		</ul>
	</section>

    <section class="slide compact">
		<h2>Mobile vs Tablet vs Desktop</h2>
		<div class="ct-chart ct-chart-line ct-chart-usage"></div>
		<p class="note">source: <a href="http://gs.statcounter.com/platform-market-share/desktop-mobile-tablet#monthly-200901-201705" target="_blank">StatCounter (2.5mln sites)</a></p>
		<style>
			.ct-chart {
				height: 65%;
			}
		</style>
	</section>

	<section class="slide">
		<h2>Download time for 100KB</h2>
		<div class="ct-chart ct-chart-bar ct-chart-load-time"></div>
	</section>

    <section class="slide middle with-img">
		<div class="middle">
			<p>App bundle</p>
			3.9MB => 10min @ 3G
		</div>
		<img src="pictures/imout.gif" />
	</section>

    <section class="slide">
		<img src="pictures/thinking.gif" class="full-height" />
	</section>

    <section class="slide">
		<h2>Minification, obfuscation and optimisation</h2>
		<ul>
			<li class="next">Mangle variables</li>
			<li class="next">Remove comments</li>
			<li class="next"><b>Drop dead code</b></li>
			<li class="next">Optimise loops</li>
			<li class="next">Various optimizations for boolean context</li>
		</ul>
	</section>

	<section class="slide prism">
		<h2>Minification - Webpack + UglifyJsPlugin</h2>
		<pre class="language-javascript">
            <code>
                new UglifyJsPlugin({
                    beautify: false,
                    output: { comments: false },
                    compress: {
                        unused: true,
                        dead_code: true
                    }
                })
            </code>
		</pre>
	</section>

    <section class="slide compact">
		<video width="100%" preload>
            <source src="videos/minification.webm" type="video/webm">
        </video>
	</section>

    <section class="slide middle with-img">
		<div class="middle">
			<p>App bundle + UglifyJs</p>
			1.3MB => 3:25min @ 3G
		</div>
		<img src="pictures/wat.gif" />
	</section>

    <section class="slide">
		<h2>Closure*</h2>
		<ul>
			<li class="next">Aggressive optimisation</li>
			<li class="next">Dead code eleminiation</li>
			<li class="next">You need to think about Closure during coding</li>
			<li class="next">It's easy to make a mistake</li>
		</ul>
		<p class="note next">* UglifyJS is more than enough on a daily basis</p>
	</section>

	<section class="slide prism">
		<pre class="language-javascript">
            <code>
                function square(x) { return x * x };
                function cube(x) { return x * x * x};
                let x = 5;
                if (x % 2 === 0) {
                    console.log(square(x)); 
                } else {
                    console.log(cube(x));
                }
            </code>
		</pre>
        <span class="next">
            After optimisation
            <pre class="language-javascript">
                <code>
                    console.log(125);
                </code>
            </pre>
        </span>
		<p class="next">
            Don't believe?
			<a class="next" href="https://closure-compiler.appspot.com/home">Try it yourself :)</a>
		</p>
	</section>

    <section class="slide">
        <h2>Deeper analysis of the application</h2>
		<img src="pictures/inside.gif" class="full-height with-title" />
	</section>

    <section class="slide">
		<h2>Deeper analysis of the application</h2>
		<ul>
			<li><a href="http://webpack.github.io/analyse" target="_blank">http://webpack.github.io/analyse</a>
				<ul>
					<li class="next">webpack --profile --json > stats.json</li>
					<li class="next">Dependency graph</li>
					<li class="next">Detailed statistics</li>
				</ul>
			</li>
		</ul>
	</section>

    <section class="slide">
		<figure>
			<img class="cover" src="pictures/analyse-graph.png" alt="Graph analyse">
		</figure>
	</section>

    <section class="slide">
		<h2>Deep application analysation</h2>
		<ul>
			<li><a href="http://webpack.github.io/analyse" target="_blank">http://webpack.github.io/analyse</a>
				<ul>
					<li>webpack --profile --json > stats.json</li>
					<li>Dependency graph</li>
					<li>Detailed statistics</li>
				</ul>
			</li>
			<li class="next">source-map-explorer
				<ul>
					<li class="next">npm install source-map-explorer</li>
					<li class="next">source-map-explorer main.bundle.js main.bundle.js.map</li>
				</ul>
			</li>
		</ul>
	</section>

    <section class="slide prism">
        <h2>Webpack - what does it do?</h2>
        <pre style="font-size: 21px;" class="language-javascript line-numbers next">
            <code>
                // webpack.config.js
                const path = require('path');

                module.exports =  = {
                    entry: './src/main.ts',
                    output: {
                        path: path.resolve(__dirname, 'dist'),
                        filename: 'app.js'
                    }
                };
            </code>
        </pre>
    </section>

    <section class="slide">
        <svg width="100%" height="400px" viewBox="0.00 0.00 350.00 188.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="graph1" class="graph" transform="scale(1 1) rotate(0) translate(4 184)">
                <!-- A -->
                <g id="node1" class="node">
                    <ellipse fill="none" cx="171" cy="-162" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="171" y="-157.8">app.js</text>
                </g>
                <!-- B -->
                <g id="node3" class="node">
                    <ellipse fill="none" cx="99" cy="-90" rx="27" ry="18"></ellipse>
                </g>
                <!-- A&#45;&gt;B -->
                <g id="edge2" class="edge">
                    <path fill="none" d="M156.43,-146.834C146.25,-136.938 132.476,-123.546 120.969,-112.359"></path>
                    <polygon points="123.405,-109.846 113.796,-105.385 118.526,-114.865 123.405,-109.846"></polygon>
                </g>
                <!-- X -->
                <g id="node5" class="node">
                    <ellipse fill="none" cx="171" cy="-90" rx="27" ry="18"></ellipse>
                </g>
                <!-- A&#45;&gt;X -->
                <g id="edge4" class="edge">
                    <path fill="none" d="M171,-143.697C171,-135.983 171,-126.712 171,-118.112"></path>
                    <polygon points="174.5,-118.104 171,-108.104 167.5,-118.104 174.5,-118.104"></polygon>
                </g>
                <!-- C -->
                <g id="node7" class="node vendor">
                    <ellipse fill="none" cx="243" cy="-90" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="243" y="-85.8">A</text>
                </g>
                <!-- A&#45;&gt;C -->
                <g id="edge6" class="edge">
                    <path fill="none" d="M185.57,-146.834C195.75,-136.938 209.524,-123.546 221.031,-112.359"></path>
                    <polygon points="223.474,-114.865 228.204,-105.385 218.595,-109.846 223.474,-114.865"></polygon>
                </g>
                <!-- F -->
                <g id="node15" class="node">
                    <ellipse fill="none" cx="27" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- B&#45;&gt;F -->
                <g id="edge14" class="edge">
                    <path fill="none" d="M84.4297,-74.8345C74.2501,-64.9376 60.4761,-51.5462 48.9694,-40.3591"></path>
                    <polygon points="51.4055,-37.8461 41.7957,-33.3847 46.5259,-42.865 51.4055,-37.8461"></polygon>
                </g>
                <!-- G -->
                <g id="node17" class="node">
                    <ellipse fill="none" cx="99" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- B&#45;&gt;G -->
                <g id="edge16" class="edge">
                    <path fill="none" d="M99,-71.6966C99,-63.9827 99,-54.7125 99,-46.1124"></path>
                    <polygon points="102.5,-46.1043 99,-36.1043 95.5001,-46.1044 102.5,-46.1043"></polygon>
                </g>
                <!-- Y -->
                <g id="node13" class="node">
                    <ellipse fill="none" cx="171" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- X&#45;&gt;Y -->
                <g id="edge12" class="edge">
                    <path fill="none" d="M171,-71.6966C171,-63.9827 171,-54.7125 171,-46.1124"></path>
                    <polygon points="174.5,-46.1043 171,-36.1043 167.5,-46.1044 174.5,-46.1043"></polygon>
                </g>
                <!-- D -->
                <g id="node9" class="node vendor">
                    <ellipse fill="none" cx="243" cy="-18" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="243" y="-13.8">B</text>
                </g>
                <!-- C&#45;&gt;D -->
                <g id="edge8" class="edge">
                    <path fill="none" d="M243,-71.6966C243,-63.9827 243,-54.7125 243,-46.1124"></path>
                    <polygon points="246.5,-46.1043 243,-36.1043 239.5,-46.1044 246.5,-46.1043"></polygon>
                </g>
                <!-- E -->
                <g id="node11" class="node vendor">
                    <ellipse fill="none" cx="315" cy="-18" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="315" y="-13.8">C</text>
                </g>
                <!-- C&#45;&gt;E -->
                <g id="edge10" class="edge">
                    <path fill="none" d="M257.57,-74.8345C267.75,-64.9376 281.524,-51.5462 293.031,-40.3591"></path>
                    <polygon points="295.474,-42.865 300.204,-33.3847 290.595,-37.8461 295.474,-42.865"></polygon>
                </g>
            </g>
        </svg>
    </section>

    <section class="slide">
		<figure>
			<img class="cover" src="pictures/no-splitting-map.png" alt="No optimisation">
		</figure>
	</section>

    <section class="slide">
        <h2>Bundle splitting</h2>
        <ul>
            <li class="next">Huge file splitted into smaller ones (eg. app, vendor, polyfills)</li>
            <li class="next">User doesn't need to download everything when app changes</li>
            <li class="next"><mark>CommonsChunkPlugin</mark> comes to the rescue</li>
        </ul>
    </section>

    <section class="slide prism">
        <pre style="font-size: 21px;" class="language-javascript line-numbers">
            <code>
                module.exports = {
                    entry: {
                        app: './src/main.ts',
                        <mark>vendor: './src/vendor.ts'</mark>
                    },
                    plugins: {
                        new webpack.optimize.CommonsChunkPlugin({
                            name: ['app', 'vendor']
                        }),
                    }
                };
            </code>
        </pre>
    </section>

    <section class="slide">
        <svg width="100%" height="350px" viewBox="0.00 0.00 494.00 188.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="graph1" class="graph" transform="scale(1 1) rotate(0) translate(4 184)">

                <!-- A -->
                <g id="node1" class="node">
                    <ellipse fill="none" cx="171" cy="-162" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="171" y="-157.8">app.js</text>
                </g>
                <!-- G -->
                <g id="node3" class="node">
                    <ellipse fill="none" cx="99" cy="-90" rx="27" ry="18"></ellipse>
                </g>
                <!-- A&#45;&gt;G -->
                <g id="edge2" class="edge">
                    <path fill="none" d="M156.43,-146.834C146.25,-136.938 132.476,-123.546 120.969,-112.359"></path>
                    <polygon points="123.405,-109.846 113.796,-105.385 118.526,-114.865 123.405,-109.846"></polygon>
                </g>
                <!-- X -->
                <g id="node5" class="node">
                    <ellipse fill="none" cx="171" cy="-90" rx="27" ry="18"></ellipse>
                </g>
                <!-- A&#45;&gt;X -->
                <g id="edge4" class="edge">
                    <path fill="none" d="M171,-143.697C171,-135.983 171,-126.712 171,-118.112"></path>
                    <polygon points="174.5,-118.104 171,-108.104 167.5,-118.104 174.5,-118.104"></polygon>
                </g>
                <!-- B -->
                <g id="node7" class="node vendor">
                    <ellipse fill="none" cx="261" cy="-90" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="261" y="-85.8">A</text>
                </g>
                <!-- A&#45;&gt;B -->
                <g id="edge6" class="edge">
                    <path fill="none" d="M187.928,-147.834C201.505,-137.274 220.757,-122.3 236.092,-110.373"></path>
                    <polygon points="238.403,-113.01 244.148,-104.107 234.105,-107.484 238.403,-113.01"></polygon>
                </g>
                <!-- F -->
                <g id="node15" class="node">
                    <ellipse fill="none" cx="27" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- G&#45;&gt;F -->
                <g id="edge14" class="edge">
                    <path fill="none" d="M84.4297,-74.8345C74.2501,-64.9376 60.4761,-51.5462 48.9694,-40.3591"></path>
                    <polygon points="51.4055,-37.8461 41.7957,-33.3847 46.5259,-42.865 51.4055,-37.8461"></polygon>
                </g>
                <!-- K -->
                <g id="node17" class="node">
                    <ellipse fill="none" cx="99" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- G&#45;&gt;K -->
                <g id="edge16" class="edge">
                    <path fill="none" d="M99,-71.6966C99,-63.9827 99,-54.7125 99,-46.1124"></path>
                    <polygon points="102.5,-46.1043 99,-36.1043 95.5001,-46.1044 102.5,-46.1043"></polygon>
                </g>
                <!-- Y -->
                <g id="node9" class="node">
                    <ellipse fill="none" cx="171" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- X&#45;&gt;Y -->
                <g id="edge8" class="edge">
                    <path fill="none" d="M171,-71.6966C171,-63.9827 171,-54.7125 171,-46.1124"></path>
                    <polygon points="174.5,-46.1043 171,-36.1043 167.5,-46.1044 174.5,-46.1043"></polygon>
                </g>
                <!-- C -->
                <g id="node11" class="node vendor">
                    <ellipse fill="none" cx="243" cy="-18" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="243" y="-13.8">B</text>
                </g>
                <!-- B&#45;&gt;C -->
                <g id="edge10" class="edge">
                    <path fill="none" d="M256.643,-72.055C254.609,-64.1446 252.139,-54.5398 249.863,-45.6879"></path>
                    <polygon points="253.197,-44.6023 247.317,-35.789 246.418,-46.3456 253.197,-44.6023"></polygon>
                </g>
                <!-- D -->
                <g id="node13" class="node vendor">
                    <ellipse fill="none" cx="315" cy="-18" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="315" y="-13.8">C</text>
                </g>
                <!-- B&#45;&gt;D -->
                <g id="edge12" class="edge">
                    <path fill="none" d="M272.984,-73.4647C279.976,-64.4021 288.936,-52.7865 296.785,-42.6119"></path>
                    <polygon points="299.712,-44.5475 303.049,-34.4918 294.17,-40.2719 299.712,-44.5475"></polygon>
                </g>
                <!-- V -->
                <g id="node18" class="node vendor">
                    <ellipse fill="none" cx="279" cy="-162" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="279" y="-157.8">vendor.js</text>
                </g>
                <!-- V&#45;&gt;B -->
                <g id="edge18" class="edge">
                    <path fill="none" d="M274.643,-144.055C272.609,-136.145 270.139,-126.54 267.863,-117.688"></path>
                    <polygon points="271.197,-116.602 265.317,-107.789 264.418,-118.346 271.197,-116.602"></polygon>
                </g>
                <!-- 1 -->
                <g id="node21" class="node vendor">
                    <ellipse fill="none" cx="387" cy="-90" rx="27" ry="18"></ellipse>
                </g>
                <!-- V&#45;&gt;1 -->
                <g id="edge20" class="edge">
                    <path fill="none" d="M297.812,-148.807C315.002,-137.665 340.618,-121.062 359.993,-108.504"></path>
                    <polygon points="361.916,-111.429 368.403,-103.053 358.108,-105.555 361.916,-111.429"></polygon>
                </g>
                <!-- 2 -->
                <g id="node23" class="node vendor">
                    <ellipse fill="none" cx="387" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- 1&#45;&gt;2 -->
                <g id="edge22" class="edge">
                    <path fill="none" d="M387,-71.6966C387,-63.9827 387,-54.7125 387,-46.1124"></path>
                    <polygon points="390.5,-46.1043 387,-36.1043 383.5,-46.1044 390.5,-46.1043"></polygon>
                </g>
                <!-- 3 -->
                <g id="node25" class="node vendor">
                    <ellipse fill="none" cx="459" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- 1&#45;&gt;3 -->
                <g id="edge24" class="edge">
                    <path fill="none" d="M401.57,-74.8345C411.75,-64.9376 425.524,-51.5462 437.031,-40.3591"></path>
                    <polygon points="439.474,-42.865 444.204,-33.3847 434.595,-37.8461 439.474,-42.865"></polygon>
                </g>
            </g>
        </svg>
    </section>

    <section class="slide">
		<figure>
			<img class="cover" src="pictures/bundle-splitting-app-map.png" alt="No optimisation">
		</figure>
	</section>

    <section class="slide">
		<figure>
			<img class="cover" src="pictures/bundle-splitting-vendor-map.png" alt="No optimisation">
		</figure>
	</section>

    <section class="slide prism">
        <pre style="font-size: 21px;" class="language-javascript line-numbers">
            <code>
                module.exports = {
                    entry: {
                        app: './src/main.ts'
                    },
                    plugins: {
                        new webpack.optimize.CommonsChunkPlugin({
                            name: 'vendor',
                            chunks: ['app'],
                            minChunks: module => /node_modules/.test(module.resource)
                        }),
                    }
                };
            </code>
        </pre>
    </section>

    <section class="slide">
        <svg width="100%" height="350px" viewBox="0.00 0.00 494.00 188.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="graph1" class="graph" transform="scale(1 1) rotate(0) translate(4 184)">

                <!-- A -->
                <g id="node1" class="node">
                    <ellipse fill="none" cx="171" cy="-162" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="171" y="-157.8">app.js</text>
                </g>
                <!-- G -->
                <g id="node3" class="node">
                    <ellipse fill="none" cx="99" cy="-90" rx="27" ry="18"></ellipse>
                </g>
                <!-- A&#45;&gt;G -->
                <g id="edge2" class="edge">
                    <path fill="none" d="M156.43,-146.834C146.25,-136.938 132.476,-123.546 120.969,-112.359"></path>
                    <polygon points="123.405,-109.846 113.796,-105.385 118.526,-114.865 123.405,-109.846"></polygon>
                </g>
                <!-- X -->
                <g id="node5" class="node">
                    <ellipse fill="none" cx="171" cy="-90" rx="27" ry="18"></ellipse>
                </g>
                <!-- A&#45;&gt;X -->
                <g id="edge4" class="edge">
                    <path fill="none" d="M171,-143.697C171,-135.983 171,-126.712 171,-118.112"></path>
                    <polygon points="174.5,-118.104 171,-108.104 167.5,-118.104 174.5,-118.104"></polygon>
                </g>
                <!-- B -->
                <g id="node7" class="node vendor">
                    <ellipse fill="none" cx="261" cy="-90" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="261" y="-85.8">A</text>
                </g>
                <!-- A&#45;&gt;B -->
                <g id="edge6" class="edge">
                    <path fill="none" d="M187.928,-147.834C201.505,-137.274 220.757,-122.3 236.092,-110.373"></path>
                    <polygon points="238.403,-113.01 244.148,-104.107 234.105,-107.484 238.403,-113.01"></polygon>
                </g>
                <!-- F -->
                <g id="node15" class="node">
                    <ellipse fill="none" cx="27" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- G&#45;&gt;F -->
                <g id="edge14" class="edge">
                    <path fill="none" d="M84.4297,-74.8345C74.2501,-64.9376 60.4761,-51.5462 48.9694,-40.3591"></path>
                    <polygon points="51.4055,-37.8461 41.7957,-33.3847 46.5259,-42.865 51.4055,-37.8461"></polygon>
                </g>
                <!-- K -->
                <g id="node17" class="node">
                    <ellipse fill="none" cx="99" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- G&#45;&gt;K -->
                <g id="edge16" class="edge">
                    <path fill="none" d="M99,-71.6966C99,-63.9827 99,-54.7125 99,-46.1124"></path>
                    <polygon points="102.5,-46.1043 99,-36.1043 95.5001,-46.1044 102.5,-46.1043"></polygon>
                </g>
                <!-- Y -->
                <g id="node9" class="node">
                    <ellipse fill="none" cx="171" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- X&#45;&gt;Y -->
                <g id="edge8" class="edge">
                    <path fill="none" d="M171,-71.6966C171,-63.9827 171,-54.7125 171,-46.1124"></path>
                    <polygon points="174.5,-46.1043 171,-36.1043 167.5,-46.1044 174.5,-46.1043"></polygon>
                </g>
                <!-- C -->
                <g id="node11" class="node vendor">
                    <ellipse fill="none" cx="243" cy="-18" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="243" y="-13.8">B</text>
                </g>
                <!-- B&#45;&gt;C -->
                <g id="edge10" class="edge">
                    <path fill="none" d="M256.643,-72.055C254.609,-64.1446 252.139,-54.5398 249.863,-45.6879"></path>
                    <polygon points="253.197,-44.6023 247.317,-35.789 246.418,-46.3456 253.197,-44.6023"></polygon>
                </g>
                <!-- D -->
                <g id="node13" class="node vendor">
                    <ellipse fill="none" cx="315" cy="-18" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="315" y="-13.8">C</text>
                </g>
                <!-- B&#45;&gt;D -->
                <g id="edge12" class="edge">
                    <path fill="none" d="M272.984,-73.4647C279.976,-64.4021 288.936,-52.7865 296.785,-42.6119"></path>
                    <polygon points="299.712,-44.5475 303.049,-34.4918 294.17,-40.2719 299.712,-44.5475"></polygon>
                </g>
                <!-- V -->
                <g id="node18" class="node vendor">
                    <ellipse fill="none" cx="279" cy="-162" rx="27" ry="18"></ellipse>
                    <text text-anchor="middle" x="279" y="-157.8">vendor.js</text>
                </g>
                <!-- V&#45;&gt;B -->
                <g id="edge18" class="edge">
                    <path fill="none" d="M274.643,-144.055C272.609,-136.145 270.139,-126.54 267.863,-117.688"></path>
                    <polygon points="271.197,-116.602 265.317,-107.789 264.418,-118.346 271.197,-116.602"></polygon>
                </g>
                <!-- 1 -->
                <g id="node21" class="node vendor empty">
                    <ellipse fill="none" cx="387" cy="-90" rx="27" ry="18"></ellipse>
                </g>
                <!-- V&#45;&gt;1 -->
                <g id="edge20" class="edge">
                    <path fill="none" d="M297.812,-148.807C315.002,-137.665 340.618,-121.062 359.993,-108.504"></path>
                    <polygon points="361.916,-111.429 368.403,-103.053 358.108,-105.555 361.916,-111.429"></polygon>
                </g>
                <!-- 2 -->
                <g id="node23" class="node vendor empty">
                    <ellipse fill="none" cx="387" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- 1&#45;&gt;2 -->
                <g id="edge22" class="edge">
                    <path fill="none" d="M387,-71.6966C387,-63.9827 387,-54.7125 387,-46.1124"></path>
                    <polygon points="390.5,-46.1043 387,-36.1043 383.5,-46.1044 390.5,-46.1043"></polygon>
                </g>
                <!-- 3 -->
                <g id="node25" class="node vendor empty">
                    <ellipse fill="none" cx="459" cy="-18" rx="27" ry="18"></ellipse>
                </g>
                <!-- 1&#45;&gt;3 -->
                <g id="edge24" class="edge">
                    <path fill="none" d="M401.57,-74.8345C411.75,-64.9376 425.524,-51.5462 437.031,-40.3591"></path>
                    <polygon points="439.474,-42.865 444.204,-33.3847 434.595,-37.8461 439.474,-42.865"></polygon>
                </g>
            </g>
        </svg>
    </section>

    <section class="slide">
		<figure>
			<img class="cover" src="pictures/bundle-splitting-with-tree-shaking-vendor-map.png" alt="No optimisation">
		</figure>
	</section>

	<section class="slide prism">
		<h2>Bundling</h2>
		<pre class="language-javascript">
            <code>
                // maths.js
                export function <mark class="important">square(x)</mark> { return x * x; }
                export function cube(x) { return x * x * x; }
                
                // main.js
                import { cube } from './maths.js';
                console.log(cube(5)); // 125
            </code>
		</pre>
	</section>

    <section class="slide prism">
		<pre style="font-size: 22px;" class="language-javascript">
            <code>
                /***/ (function(module, exports, __webpack_require__) {
                    "use strict";
                    exports.__esModule = true;
                    exports.square = square;
                    exports.cube = cube;
                    function square(x) {
                        return x * x;
                    }
                    function cube(x) {
                        return x * x * x;
                    }
                /***/ }),
            </code>
		</pre>
	</section>

    <section class="slide">
        <h2>Tree shaking</h2>
		<ul>
			<li class="next">Bundler emits only used exports to the bundle</li>
			<li class="next">Minifier removes dead code</li>
			<li class="next">Webpack 2.x + ES6 (import/export)</li>
			<li class="next">Babel + es2015 preset (no modules change)</li>
		</ul>
    </section>

    <section class="slide prism">
        <h2>Tree Shaking - Webpack</h2>
        <pre class="language-javascript">
            <code>
                test: /\.js$/,
                exclude: /node_modules/,
                loader: 'babel-loader',
                options: {
                    presets: [
                        [ 'es2015', { modules: false } ] // default CommonJS
                    ]
                }
            </code>
		</pre>
	</section>

    <section class="slide prism">
        <pre style="font-size: 22px;" class="language-javascript">
            <code>
                /***/ (function(module, __webpack_exports__, __webpack_require__) {
                    "use strict";
                    /* unused harmony export square */
                    /* harmony export (immutable) */ __webpack_exports__["a"] = cube;
                    function square(x) {
                        return x * x;
                    }
                    function cube(x) {
                        return x * x * x;
                    }
                /***/ }),
            </code>
        </pre>
    </section>

    <section class="slide prism">
        <h2>Bundle + Minification = Tree Shaking</h2>
        <pre style="font-size: 22px;" class="language-javascript">
            <code>
                function(module, __webpack_exports__, __webpack_require__) {
                    "use strict";
                    function cube(x) {
                        return x * x * x;
                    }
                    __webpack_exports__.a = cube;
                }
            </code>
        </pre>
    </section>

    <section class="slide">
		<figure>
			<img class="cover" src="pictures/bundle-splitting-with-tree-shaking-minify-vendor-map.png" alt="No optimisation">
		</figure>
	</section>

    <section class="slide middle with-img">
		<div class="middle">
			<p>App bundle + UglifyJs + Tree Shaking</p>
			1.1MB => 2:54min @ 3G
		</div>
		<img src="pictures/smile.gif"/>
	</section>

    <section class="slide compact">
        <video width="100%" preload>
            <source src="videos/tree-shaking.webm" type="video/webm">
        </video>
	</section>

    <section class="slide">
		<img src="pictures/why.gif" class="full-height" />
	</section>

    <section class="slide">
		<figure>
			<img class="cover" src="pictures/performance.png" alt="Performance">
		</figure>
	</section>

    <section class="slide">
        <h2>@angular/compiler</h2>
        <ul>
            <li class="next">Transforms HTML into JavaScript optimized for VM</li>
            <li class="next">Creates scoped CSS based on the ViewEncapsulation</li>
            <li class="next">Generates metadata</li>
            <li class="next">Every time app is loaded (JIT)</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Ahead of Time compilation</h2>
        <ul>
            <li class="next">Smaller application size (no @angular/compiler)</li>
            <li class="next">Faster rendering (templates already compiled)</li>
            <li class="next">Detect template errors earlier (at build time)</li>
            <li class="next">Better security (no evals)</li>
            <li class="next">Even smaller bundle size with tree shaking!</li>
        </ul>
    </section>

    <section class="slide">
		<figure>
			<img class="cover" src="pictures/compiler-map.png" alt="Compiler map">
		</figure>
	</section>

    <section class="slide">
        <h2>@angular/compiler</h2>
        <ul>
            <li>HTML can be compiled to TypeScript or JavaScript</li>
            <li class="next">...so your JS code in HTML needs to be valid</li>
            <li class="next">...and it have to be <a href="https://medium.com/@isaacplmann/making-your-angular-2-library-statically-analyzable-for-aot-e1c6f3ebedd5">statically analyzable</a>.</li>
        </ul>
    </section>

    <section class="slide prism">
        <pre class="language-html">
            <code>
                &lt;h1&gt;Hello World!&lt;/h1&gt;
            </code>
        </pre>
        <pre style="font-size: 21px;" class="language-javascript next">
            <code>
                // Compiles into
                ...
                const parentRenderNode:any = this.renderer.createViewRoot(this.parentElement);
                this._el_0 = import3.createRenderElement(this.renderer,parentRenderNode,'h1',import3.EMPTY_INLINE_ARRAY,(null as any));
                this._text_1 = this.renderer.createText(this._el_0,'Hello World!',(null as any));
                this._text_2 = this.renderer.createText(parentRenderNode,'\n',(null as any));
                ...
            </code>
        </pre>
    </section>

    <section class="slide">
        <h2>@ngtools/webpack</h2>
        <ul>
            <li>Replaces awesome-typescript-loader + ng-router-loader + angular2-template-loader</li>
            <li class="next">...and adds AoT compilation</li>
            <li class="next">Can be used with SCSS, LESS, PUG</li>
            <li class="next">It's part of the Angular CLI</li>
        </ul>
    </section>

    <section class="slide prism">
        <h2>@ngtools/webpack</h2>
            <pre style="font-size: 25px;" class="language-javascript">
                <code>
                    let AotPlugin = require('@ngtools/webpack').AotPlugin;

                    module.exports = {
                        rules: [{ test: /\.ts/, use: '@ngtools/webpack' }]
                        plugins: [
                            new AotPlugin({
                                tsConfigPath: path.resolve('tsconfig.json'),
                                entryModule: path.resolve('app.module#AppModule')
                            })
                        ]
                    }
                </code>
            </pre>
    </section>

    <section class="slide">
		<figure>
			<img class="cover" src="pictures/aot-performance.png" alt="AoT performance">
		</figure>
	</section>

    <section class="slide">
		<figure>
			<img class="cover" src="pictures/aot-map.png" alt="Aot source map">
		</figure>
	</section>

    <section class="slide compact">
		<video width="100%" preload>
            <source src="videos/aot.webm" type="video/webm">
        </video>
	</section>

    <section class="slide middle with-img">
		<div class="middle">
			<p>Angular + UglifyJs + Tree Shaking + AoT</p>
			792KB => 2:02min @ 3G
		</div>
		<img src="pictures/thumbup.gif" />
	</section>

    <section class="slide">
        <h2>Who needs all modules at once?</h2>
    </section>

    <section class="slide">
        <h2>Lazy loading</h2>
        <ul>
            <li class="next">Only required code is delivered in app.js</li>
            <li class="next">Rest is splitted into chunks and fetched on demand</li>
			<li class="next">Fast time to interact</li>
		</ul>
    </section>

    <section class="slide compact">
		<video width="100%" preload>
            <source src="videos/lazy-load-1.webm" type="video/webm">
        </video>
	</section>

    <section class="slide prism">
		<h2>Lazy loading</h2>
		<pre class="language-javascript">
            <code>
                const routes: Routes = [
                    { path: '', component: Component },
                    {
                        path: 'lazy',
                        loadChildren: './+lazy/lazy.module#LazyModule'
                    }
                ];
            </code>
		</pre>
	</section>

    <section class="slide compact">
		<video width="100%" preload>
            <source src="videos/lazy-load-2.webm" type="video/webm">
        </video>
	</section>

    <section class="slide prism">
        <h2>Lazy loading - preloading strategy</h2>
        <pre class="language-javascript">
            <code>
                import {
                    RouterModule, PreloadAllModules
                } from '@angular/router';
                ...
                imports: [
                    RouterModule.forRoot(routes, {
                        preloadingStrategy: PreloadAllModules 
                    })
                ],
            </code>
        </pre>
    </section>

    <section class="slide compact">
		<video width="100%" preload>
            <source src="videos/lazy-load-preload.webm" type="video/webm">
        </video>
	</section>

	<section class="slide">
		<h2>GZip compression</h2>
		<ul>
			<li class="next">Response size reduced about ~80% (most data is repetable text)</li>
		</ul>
		<pre class="next">
			<code><mark class="important">.selector</mark> { /* ... */ }</code>
			<code><mark class="important">.selector</mark> .child-selector { /* ... */ }</code>
		</pre>
		<table class="next">
			<tr>
				<td scope="row">bootstrap.min.css</td>
				<td>118KB</td>
			</tr>
			<tr>
				<td scope="row">bootstrap.min.css.gz</td>
				<td>19KB</td>
			</tr>
			<tr>
				<th scope="row">Difference</th>
				<td><mark>83,9%</mark></td>
			</tr>
		</table>
	</section>

    <section class="slide prism">
		<h2>compression-webpack-plugin</h2>
		<pre class="language-javascript">
            <code>
                new CompressionPlugin({
                    regExp: /\.css$|\.html$|\.js$$/,
                    threshold: 2 * 1024
                })
            </code>
		</pre>
		<pre class="language-clike next">
            <code>
                AddOutputFilterByType DEFLATE text/javascript
                AddOutputFilterByType DEFLATE text/css
                AddOutputFilterByType DEFLATE text/html
            </code>
		</pre>
	</section>

    <section class="slide compact">
		<video width="100%" preload>
            <source src="videos/gzip.webm" type="video/webm">
        </video>
	</section>

	<section class="slide middle with-img">
		<div class="middle">
			<p>Angular + UglifyJs + Tree Shaking + AoT + GZip</p>
			134KB => 0:20sec @ 3G
		</div>
		<img src="pictures/party.gif" />
	</section>

    <section class="slide">
        <h2>Resources</h2>
        <ul>
            <li><a href="https://github.com/pawelkondraciuk/warsawjs-optimisation-demo">Demo application</a></li>
            <li><a href="https://blog.mgechev.com/2016/08/14/ahead-of-time-compilation-angular-offline-precompilation/">AoT</a></li>
            <li><a href="https://www.youtube.com/watch?v=kW9cJsvcsGo">The Angular 2 Compiler</a></li>
            <li><a href="https://medium.com/@isaacplmann/making-your-angular-2-library-statically-analyzable-for-aot-e1c6f3ebedd5">Making your code statically analyzable</a></li>
            <li><a href="https://blog.craftlab.hu/multiple-solutions-for-angular-ahead-of-time-aot-compilation-c474d9a0d508">More about AoT</a></li>
            <li><a href="https://github.com/webpack/webpack/tree/master/examples/harmony-unused">Harmony Unused</a></li>
        </ul>
    </section>

    <section class="slide">
		<img src="pictures/questions.gif" class="full-height" />
        <p class="contact-note"><a href="http://twitter.com/pawelkondraciuk">@pawelkondraciuk</a></p>
        <style>
            p.contact-note {
                position: absolute;
                bottom: 0px;
                right: 100px;
            }
        </style>
	</section>

    <section class="slide">
        <h3 class="shout">See you next month at WarsawJS</h3>
    </section>

    <div class="progress"></div>

    <footer class="badge">
        <a href="https://github.com/warsawjs/warsawjs-slides-template">Fork me on GitHub</a>
    </footer>

    <footer class="badge badge-top-left">
        <a href="#" class="fullscreen">Fullscreen</a>
    </footer>

    <script src="vendors/gamepad/gamepad.js"></script>
    <script src="vendors/shower/shower.min.js"></script>
    <script src="vendors/shower-gamepad/shower.gamepad.js"></script>
    <script src="vendors/shower-video/shower-video.js"></script>
    <script src="vendors/chartist/chartist.min.js"></script>
    <script src="modules/analytics.js"></script>
    <script src="modules/fullscreen.js"></script>
    <script src="modules/legend.js"></script>
	<script src="modules/createRect.js"></script>
	<script src="modules/charts.js"></script>

    <!-- Prism.js -->
    <script src="vendors/prism/prism.js"></script>
    <script src="modules/custom-prism.js"></script>
</body>
</html>
